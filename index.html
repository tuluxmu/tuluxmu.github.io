<!doctype html>



  


<html class="theme-next muse use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.5.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.5.0" />






<meta name="description" content="Front-end engineer。">
<meta property="og:type" content="website">
<meta property="og:title" content="Lucy's Blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Lucy's Blog">
<meta property="og:description" content="Front-end engineer。">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Lucy's Blog">
<meta name="twitter:description" content="Front-end engineer。">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: '博主'
    }
  };
</script>

  <title> Lucy's Blog </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?your-analytics-id";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>






  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Lucy's Blog</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">Stay Hungry</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu menu-left">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            标签
          </a>
        </li>
      

      
      
      
        <li class="menu-item menu-item-search">
          <a href="#" class="st-search-show-outputs">
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <form class="site-search-form">
  <input type="text" id="st-search-input" class="st-search-input st-default-search-input" />
</form>

<script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
    (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
    e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');

  _st('install', 'your-swiftype-key','2.0.0');
</script>



    </div>
  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">

    

    
    

    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/02/01/ReactJs与浏览器之间的运作原理/" itemprop="url">
                  ReactJs与浏览器之间的运作原理
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-02-01T11:37:25+08:00" content="2016-02-01">
              2016-02-01
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/02/01/ReactJs与浏览器之间的运作原理/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/02/01/ReactJs与浏览器之间的运作原理/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#ReactJs与浏览器之间的运作原理<br>React 针对浏览器提供了十分强大的抽象化概念，让你在大部份的情况下不必再直接操作 DOM ，不过有些时候或许还是需要单纯的存取底层的 API(DOM API)，可能是使用第三方函式库或者是已经写好的程序码。</p>
<p>##关于虚拟 DOM<br>React 快速的原因是因为它从来不直接影响 DOM。<br>React 会负责在存储器中持续维护一份 DOM 的表现结构。<br>render() 方法负责回传关于 DOM 的描速，React 就能得知其和存储器中结构的差异，接着他会计算出最快的更新方式然后交给浏览器去影响 DOM。<br>此外，React 完整实作了对应的事件系统，所有物件的事件保证符合 W3C 的规范，且关于事件气泡传递(bubbles)的行为在任何浏览器也都一致。<br>甚至可以在 IE8 使用 HTML5 的事件。<br>大多数的时候你的程序操作应该都会 React 所建构的”仿浏览器”的世界里，因为它俱有高效能和相对容易使用。<br>不过有些情况下，你可能会需要存取使用底层基本的 API，例如使用 jQuery 第三方套件，React 提供了一个后门允许你可以直接操作底层的 API。</p>
<h1 id="Refs__u548C_getDOMNode_28_29"><a href="#Refs__u548C_getDOMNode_28_29" class="headerlink" title="Refs 和 getDOMNode()"></a>Refs 和 getDOMNode()</h1><p>为了与浏览器互动，你需要使用指向 DOM 节点的参考物件。<br>每一个 Mounted 的 React 元件都会有 getDOMNode() 的功能 ，你可以透过呼叫它取得该 DOM 的参考物件。<br>注意：getDOMNode() 只能在元件已经挂载完毕时使用(换句话说这表示该物件已经被渲染放置到 DOM 里了)。如果你尝试在元件尚未挂载完毕前呼叫这个 API 将会发生例外。<br>为了取得 React 元件的参考，你可以使用 this 取得目前元件或者使用 refs，使用 refs 则需要设定一个名称，如下范例：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">/** @jsx React.DOM */&#10;&#10;var MyComponent = React.createClass(&#123;&#10;  handleClick: function() &#123;&#10;    // &#36879;&#36807;&#21407;&#29983; API &#26126;&#30830;&#30340;&#25351;&#31034; input &#20026; focus &#29366;&#24577;&#12290;&#10;    this.refs.myTextInput.getDOMNode().focus();&#10;  &#125;,&#10;  render: function() &#123;&#10;    // ref &#23646;&#24615;&#26367;&#20803;&#20214;&#22686;&#21152;&#19968;&#20010;&#21442;&#32771;&#28982;&#21518;&#20320;&#23601;&#21487;&#20197;&#22312;&#20803;&#20214;&#25346;&#36733;&#23436;&#27605;&#21518;&#20351;&#29992; `this.refs`&#10;    return (&#10;      &#60;div&#62;&#10;        &#60;input type=&#34;text&#34; ref=&#34;myTextInput&#34; /&#62;&#10;        &#60;input&#10;          type=&#34;button&#34;&#10;          value=&#34;Focus the text input&#34;&#10;          onClick=&#123;this.handleClick&#125;&#10;        /&#62;&#10;      &#60;/div&#62;&#10;    );&#10;  &#125;&#10;&#125;);&#10;&#10;React.renderComponent(&#10;  &#60;MyComponent /&#62;,&#10;  document.getElementById(&#39;example&#39;)&#10;);</span><br></pre></td></tr></table></figure>
<p>#元件的生命周期</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#20803;&#20214;&#30340;&#29983;&#21629;&#21608;&#26399;&#26377;&#19977;&#20010;&#20027;&#35201;&#30340;&#37096;&#20998;&#65306;&#10;&#62; &#61623;Mounting&#65306;&#20803;&#20214;&#27491;&#20934;&#22791;&#35201;&#34987;&#20889;&#20837; DOM&#10;&#62; &#61623;Updating&#65306;&#20803;&#20214;&#20390;&#27979;&#21040;&#29366;&#24577;&#30340;&#25913;&#21464;&#20934;&#22791;&#37325;&#26032;&#28210;&#26579;&#12290;&#10;&#62; &#61623;Unmounting&#65306;&#20803;&#20214;&#27491;&#35201;&#34987;&#20174; DOM &#20013;&#31227;&#38500;&#12290;&#10;React &#26681;&#25454;&#29983;&#21629;&#21608;&#26399;&#25552;&#20379;&#20102;&#23545;&#24212;&#30340;&#26041;&#27861;(&#20107;&#20214;)&#35753;&#20320;&#21487;&#20197;&#22312;&#23545;&#24212;&#30340;&#38454;&#27573;&#20570;&#19968;&#20123;&#22788;&#29702;&#12290;&#10;Will &#30340;&#26041;&#27861;&#29992;&#22312;&#26576;&#20123;&#29366;&#20917;&#20934;&#22791;&#21457;&#29983;&#20043;&#21069;&#65292;Did &#30340;&#26041;&#27861;&#21017;&#34920;&#31034;&#35813;&#29366;&#20917;&#24050;&#32463;&#21457;&#29983;&#21518;&#12290;&#10;Mounting &#25346;&#36733;&#27969;&#31243;&#10;&#61623;getInitialState()&#65306;&#24403;&#29289;&#20214;&#34987;&#35843;&#29992;&#26102;&#27492;&#26041;&#27861;&#20250;&#22312;&#20889;&#20837; DOM &#20043;&#21069;&#34987;&#35302;&#21457;&#65292;&#36890;&#24120;&#29992;&#26469;&#31649;&#29702;&#29366;&#24577;&#30340;&#20803;&#20214;&#21487;&#20197;&#29992;&#36825;&#20010;&#26041;&#27861;&#21021;&#22987;&#21270;&#19968;&#20123;&#36164;&#26009;&#12290;&#10;&#61623;componentWillMount&#65306;&#24403;&#20803;&#20214;&#20869;&#37096;&#30340;&#32467;&#26500;&#22788;&#29702;&#23436;&#27605;&#20934;&#22791;&#20889;&#20837; DOM &#20043;&#21069;&#35302;&#21457;&#12290;&#10;&#61623;componentDidMount(DOMElement rootNode)&#65306;&#24403;&#20803;&#20214;&#34987;&#20889;&#20837; DOM &#20043;&#21518;&#35302;&#21457;&#12290;&#24403;&#21021;&#22987;&#21270;&#38656;&#35201;&#25805;&#20316; DOM &#20803;&#32032;&#23601;&#21487;&#20197;&#29992;&#36825;&#20010;&#26041;&#27861;&#12290;&#10;Updating &#26356;&#26032;&#27969;&#31243;&#10;&#61623;componentWillReceiveProps(nextProps)&#65306;&#24050;&#25346;&#36733;&#30340;&#20803;&#20214;&#25910;&#21040;&#26032;&#30340; props &#26102;&#34987;&#35302;&#21457;&#12290;&#22312;&#36825;&#20010;&#26041;&#27861;&#37324;&#20320;&#36890;&#24120;&#20250;&#21435;&#27604;&#36739; this.props &#21644; nextProps &#28982;&#21518;&#20877;&#29992; this.setState &#21435;&#25913;&#21464;&#29366;&#24577;&#12290;&#10;&#61623;shouldComponentUpdate(nextProps, nextState)&#65306;&#36825;&#20010;&#20989;&#24335;&#38656;&#35201;&#22238;&#20256;&#19968;&#20010;&#24067;&#23572;&#20540;&#65292;&#24403;&#20803;&#20214;&#21028;&#26029;&#26159;&#21542;&#38656;&#35201;&#26356;&#26032; DOM &#26102;&#20250;&#34987;&#35302;&#21457;&#12290;&#20320;&#21487;&#20197;&#22312;&#36825;&#20010;&#26041;&#27861;&#37324;&#38754;&#21435;&#27604;&#36739; this.props&#65292;this.state&#65292;nextProps&#65292;nextState &#26469;&#20915;&#23450;&#26159;&#21542;&#38656;&#35201;&#26356;&#26032;&#65292;&#22238;&#20256; false &#21017;&#20250;&#36339;&#36807;&#27492;&#27425;&#35302;&#21457;&#19981;&#26356;&#26032;&#65292;&#22914;&#26524;&#20320;&#20160;&#20040;&#37117;&#19981;&#22238;&#20256;&#39044;&#35774;&#20250;&#24403;&#20570; false &#12290;&#10;&#61623;componentWillUpdate&#65306;&#20363;&#22914;&#22312;&#19978;&#38754; shouldComponentUpdate &#20320;&#22238;&#20256;&#20102; true &#65292;&#20803;&#20214;&#30830;&#23450;&#35201;&#26356;&#26032;&#20102;&#65292;&#22312;&#20934;&#22791;&#26356;&#26032;&#21069;&#36825;&#20010;&#26041;&#27861;&#20250;&#34987;&#35302;&#21457;&#12290;&#10;&#61623;componentDidupdate(prevProps, prevState, rootNode)&#65306;&#26356;&#26032;&#21518;&#35302;&#21457;&#12290;&#10;Unmounting &#21368;&#36733;&#27969;&#31243;&#10;&#61623;componentWillUnmount()&#65306;&#24403;&#20803;&#20214;&#20934;&#22791;&#35201;&#34987;&#31227;&#38500;&#25110;&#30772;&#22351;&#26102;&#35302;&#21457;&#12290;&#10;&#25346;&#36733;&#21518;&#25165;&#33021;&#20351;&#29992;&#30340;&#26041;&#27861;&#10;&#61623;getDOMNode()&#65306;&#20351;&#29992;&#27492;&#26041;&#27861;&#20250;&#20256;&#22238;&#19968;&#20010; DOM &#20803;&#32032;&#29289;&#20214;&#65292;&#36879;&#36807;&#36825;&#20010;&#26041;&#27861;&#20320;&#21487;&#20197;&#21462;&#24471;&#19968;&#20010;&#21442;&#32771;&#29289;&#20214;&#30452;&#25509;&#25805;&#20316; DOM &#33410;&#28857;&#12290;&#10;&#61623;forceUpdate()&#65306;&#20219;&#20309;&#24050;&#25346;&#36733;&#30340;&#20803;&#20214;&#65292;&#24403;&#20320;&#30693;&#36947;&#20803;&#20214;&#20869;&#37096;&#26377;&#20123;&#29366;&#24577;&#24050;&#32463;&#25913;&#21464;&#20294;&#20182;&#19981;&#26159;&#36879;&#36807; this.setState() &#21435;&#20462;&#25913;&#20540;&#30340;&#26102;&#20505;&#21487;&#20197;&#21628;&#21483;&#36825;&#20010;&#26041;&#27861;&#24378;&#36843;&#26356;&#26032;&#12290;&#10;&#27880;&#24847;&#65306;componentDidMount() &#21644; componentDidUpdate() &#30340; rootNode &#21442;&#25968;&#21482;&#26159;&#25552;&#20379;&#20320;&#19968;&#20010;&#27604;&#36739;&#26041;&#20415;&#30340;&#26041;&#24335;&#23384;&#21462; DOM &#65292;&#36825;&#21644;&#20351;&#29992; this.getDOMNode() &#26159;&#19968;&#26679;&#30340;&#12290;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">/** @jsx React.DOM */var Test = React.createClass(&#123;&#10;  getInitialState: function () &#123;&#10;    console.log(&#34;&#62; getInitialState()&#34;);&#10;    return &#123;user: &#39;AndyYou&#39;&#125;;&#10;  &#125;,&#10;  componentWillMount: function () &#123;&#10;    console.log(&#34;&#62; componentWillMount()&#34;);&#10;  &#125;,&#10;  componentDidMount: function (node) &#123;&#10;    console.log(&#34;&#62; componentDidMount(node)&#34;);&#10;    console.log(node.className);&#10;    console.log(node.value);&#10;    console.log(node.id);&#10;    console.log(this.getDOMNode().className);&#10;    console.log(this.getDOMNode().value);&#10;    console.log(this.getDOMNode().id);&#10;  &#125;,&#10;  componentWillReceiveProps: function (nextProps) &#123;&#10;    console.log(&#34;&#62; componentWillReceiveProps(nextProps)&#34;);&#10;    console.log(nextProps);&#10;  &#125;,&#10;  handleChange: function (e) &#123;&#10;    console.log(e.target.value);&#10;    this.setState(&#123;user: e.target.value&#125;);&#10;  &#125;,&#10;  shouldComponentUpdate: function (nextProps, nextState) &#123;&#10;    console.log(&#34;&#62; shouldComponentUpdate(nextProps, nextState)&#34;);&#10;    console.log(&#34;nextProps: &#34;);&#10;    console.log(nextProps);&#10;    console.log(&#34;nextState: &#34;);&#10;    console.log(nextState);&#10;    return true; /* need return true/false */&#10;  &#125;,&#10;  componentWillUpdate: function (nextProps, nextState) &#123;&#10;    console.log(&#34;&#62; componentWillUpdate(nextProps, nextState)&#34;);&#10;  &#125;,&#10;  componentWillUnmount: function () &#123;&#10;    console.log(&#34;&#62; componentWillUnmount()&#34;);&#10;  &#125;,&#10;  render: function () &#123;&#10;    return (&#10;      &#60;input type=&#39;text&#39; id=&#39;foobar&#39; value=&#123;this.state.user&#125; className=&#39;nav&#39; onChange=&#123;this.handleChange&#125; /&#62;&#10;    );&#10;  &#125;&#125;);var test = React.renderComponent(&#60;Test title=&#39;Untitled&#39; /&#62;, document.getElementById(&#39;example&#39;));// test.setProps(&#123;title: &#39;No&#39;&#125;);&#10;// React.unmountComponentAtNode(document.getElementById(&#39;example&#39;));// test.setState(&#123;user:&#39;Calvert&#39;&#125;);</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/02/01/React-TABS/" itemprop="url">
                  React TABS
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-02-01T11:33:37+08:00" content="2016-02-01">
              2016-02-01
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/02/01/React-TABS/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/02/01/React-TABS/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#React TABS</p>
<p>##1-show the demo</p>
<p>##2-how it works<br>I create a component with React .<br>and the first thing i thought is that how to use this component which of the API is .</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#10;&#60;TabsControl&#62;&#10;  &#60;Tab name=&#34;red&#34;&#62;&#10;    &#60;div className=&#34;red&#34;/&#62;&#10;  &#60;/Tab&#62;&#10;  &#60;Tab name=&#34;blue&#34;&#62;&#10;    &#60;div className=&#34;blue&#34;/&#62;&#10;  &#60;/Tab&#62;&#10;  &#60;Tab name=&#34;yellow&#34;&#62;&#10;    &#60;div className=&#34;yellow&#34;/&#62;&#10;  &#60;/Tab&#62;&#10;&#60;/TabsControl&#62;</span><br></pre></td></tr></table></figure>
<p>the TabsControl as a parent component, it can control the switch of Tabs and show the content in it , the attribute of Name is the title of the tab-page and it will show on the title-bar .</p>
<p>##3-create the basic element<br>1.map the {this.props.children}<br>the attr this.props.children can get the children element.<br>Cause the children element has many states , like Object or Array , React use a way to map the children element.</p>
<p>#React.Children.map#<br>so,the code is :</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#10;React.Children.map(this.props.children, (element, index) =&#62; &#123;&#10;    return (&#60;div className=&#34;tab-title-item&#34;&#62;&#123;element.props.name&#125;&#60;/div&#62;)</span><br></pre></td></tr></table></figure>
<p>2.we use the same way to create the content of tab</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#10;React.Children.map(this.props.children, element =&#62; &#123;&#10;    return (element)&#10;&#125;)</span><br></pre></td></tr></table></figure>
<p>and we combine them .</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#10;let TabsControl = React.createClass(&#123;&#10;  render: function () &#123;&#10;    let that = this;&#10;    let &#123;baseWidth&#125; = this.props;&#10;    let childrenLength = this.props.children.length;&#10;    return (&#10;      &#60;div&#62;&#10;        &#60;nav className=&#34;tab-title-items&#34;&#62;&#10;          &#123;React.Children.map(this.props.children, (element, index) =&#62; &#123;&#10;            return (&#60;div className=&#34;tab-title-item&#34;&#62;&#123;element.props.name&#125;&#60;/div&#62;)&#10;          &#125;)&#125;&#10;        &#60;/nav&#62;&#10;        &#60;div className=&#34;tab-content-items&#34;&#62;&#10;          &#123;React.Children.map(this.props.children, element =&#62; &#123;&#10;            return (element)&#10;          &#125;)&#125;&#10;        &#60;/div&#62;&#10;      &#60;/div&#62;&#10;    )&#10;  &#125;&#10;&#125;);</span><br></pre></td></tr></table></figure>
<p>We add some css ,and the Tab is created.<br>4-let the tab has its function of switch.<br>There has a most important idea , that is STATE.<br>the STATE is a Object in Javascript , it stands up the current state of the tab.<br>For example , we click the 2nd tab , and the state ==2;</p>
<h2 id="everythime_when_we_call_the_setState_28_29_2Cwe_will_trigger_the_render_28_29"><a href="#everythime_when_we_call_the_setState_28_29_2Cwe_will_trigger_the_render_28_29" class="headerlink" title="everythime when we call the setState(),we will trigger the render()."></a>everythime when we call the setState(),we will trigger the render().</h2><p>that is the DOM of the tab will update the state .</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#10;let TabsControl = React.createClass(&#123;&#10;  getInitialState: function()&#123;&#10;    return &#123;currentIndex: 0&#125;&#10;  &#125;,&#10;&#10;  getTitleItemCssClasses: function(index)&#123;&#10;    return index === this.state.currentIndex ? &#34;tab-title-item active&#34; : &#34;tab-title-item&#34;;&#10;  &#125;,&#10;&#10;  getContentItemCssClasses: function(index)&#123;&#10;    return index === this.state.currentIndex ? &#34;tab-content-item active&#34; : &#34;tab-content-item&#34;;&#10;  &#125;,&#10;&#10;  render: function()&#123;&#10;    let that = this;&#10;    let &#123;baseWidth&#125; = this.props;&#10;    let childrenLength = this.props.children.length;&#10;    return (&#10;      &#60;div&#62;&#10;        &#60;nav className=&#34;tab-title-items&#34;&#62;&#10;          &#123;React.Children.map(this.props.children, (element, index) =&#62; &#123;&#10;            return (&#60;div onClick=&#123;() =&#62; &#123;this.setState(&#123;currentIndex: index&#125;)&#125;&#125; className=&#123;that.getTitleItemCssClasses(index)&#125;&#62;&#123;element.props.name&#125;&#60;/div&#62;)&#10;          &#125;)&#125;&#10;        &#60;/nav&#62;&#10;        &#60;div className=&#34;tab-content-items&#34;&#62;&#10;          &#123;React.Children.map(this.props.children, (element, index) =&#62; &#123;&#10;            return (&#60;div className=&#123;that.getContentItemCssClasses(index)&#125;&#62;&#123;element&#125;&#60;/div&#62;)&#10;          &#125;)&#125;&#10;        &#60;/div&#62;&#10;      &#60;/div&#62;&#10;    )&#10;  &#125;&#10;&#125;);</span><br></pre></td></tr></table></figure>
<p>getInitialState：the initial state , it defaults the 1st element is the active state.<br>getTitleItemCssClasses &amp; getContentItemCssClasses to find the selected tab and it makes different from others.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">onClick=&#123;() =&#62; &#123;this.setState(&#123;currentIndex: index&#125;)&#125;&#125;&#65306;bind the click event , and it triggers the render().</span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/02/01/Closure/" itemprop="url">
                  Closure
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-02-01T11:32:16+08:00" content="2016-02-01">
              2016-02-01
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/02/01/Closure/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/02/01/Closure/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#Closure<br>a most important idea.<br>1-to master the closure.<br>the first thing i do is find the demo code.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#10;function A()&#123;&#10;    function B()&#123;&#10;       console.log(&#34;Hello Closure!&#34;);&#10;    &#125;&#10;    return B;&#10;&#125;&#10;var c = A();&#10;c();//Hello Closure!</span><br></pre></td></tr></table></figure>
<p>the above is the most simple demo.<br>we analyze the code , and we will find that :<br>1-define a function A.<br>2-In A , define a function B.<br>3-In A , return B .<br>4-execute A(),and the return value == c ;<br>5-execute C().<br>In a word , In function A ,there has a function B.<br>and we use var C to execute function B();<br>2-the function of the Closure</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#10;function A()&#123;&#10;    var count = 0;&#10;    function B()&#123;&#10;       count ++;&#10;       console.log(count);&#10;    &#125;&#10;    return B;&#10;&#125;&#10;var c = A();&#10;c();// 1&#10;c();// 2&#10;c();// 3</span><br></pre></td></tr></table></figure>
<p>3-</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#10;(function(document)&#123;&#10;    var viewport;&#10;    var obj = &#123;&#10;        init:function(id)&#123;&#10;           viewport = document.querySelector(&#34;#&#34;+id);&#10;        &#125;,&#10;        addChild:function(child)&#123;&#10;            viewport.appendChild(child);&#10;        &#125;,&#10;        removeChild:function(child)&#123;&#10;            viewport.removeChild(child);&#10;        &#125;&#10;    &#125;&#10;    window.jView = obj;&#10;&#125;)(document);</span><br></pre></td></tr></table></figure>
<p>4-</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#10;var f = function(document)&#123;&#10;    var viewport;&#10;    var obj = &#123;&#10;        init:function(id)&#123;&#10;            viewport = document.querySelector(&#34;#&#34;+id);&#10;        &#125;,&#10;        addChild:function(child)&#123;&#10;            viewport.appendChild(child);&#10;        &#125;,&#10;        removeChild:function(child)&#123;&#10;            viewport.removeChild(child);&#10;        &#125;&#10;    &#125;&#10;    window.jView = obj;&#10;&#125;;&#10;f(document);</span><br></pre></td></tr></table></figure>
<p>#window.jView = obj; refs to the meaning of Closure.</p>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/02/01/how-to-make-a-good-front-end-developer/" itemprop="url">
                  how to make a good front-end developer
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-02-01T11:30:38+08:00" content="2016-02-01">
              2016-02-01
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/02/01/how-to-make-a-good-front-end-developer/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/02/01/how-to-make-a-good-front-end-developer/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#how to make a good front-end developer</p>
<p>##1-troduce myself to other people</p>
<p>##2-make friends with those who are better than you</p>
<p>##3-balance your life and your work</p>
<p>##4-take a charge of your work</p>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/02/01/Improve-Nested-Conditionals/" itemprop="url">
                  Improve Nested Conditionals
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-02-01T11:28:43+08:00" content="2016-02-01">
              2016-02-01
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/02/01/Improve-Nested-Conditionals/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/02/01/Improve-Nested-Conditionals/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>##Improve Nested Conditionals<br>How can we improve and make more efficient nested if statement in javascript.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#10;if (color) &#123;&#10;  if (color === &#39;black&#39;) &#123;&#10;    printBlackBackground();&#10;  &#125; else if (color === &#39;red&#39;) &#123;&#10;    printRedBackground();&#10;  &#125; else if (color === &#39;blue&#39;) &#123;&#10;    printBlueBackground();&#10;  &#125; else if (color === &#39;green&#39;) &#123;&#10;    printGreenBackground();&#10;  &#125; else &#123;&#10;    printYellowBackground();&#10;  &#125;&#10;&#125;</span><br></pre></td></tr></table></figure>
<p>One way to improve the nested if statement would be using the switch statement. Although it is less verbose and is more ordered, It’s not recommended to use it because it’s so difficult to debug errors, here’s why.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#10;switch(color) &#123;&#10;  case &#39;black&#39;:&#10;    printBlackBackground();&#10;    break;&#10;  case &#39;red&#39;:&#10;    printRedBackground();&#10;    break;&#10;  case &#39;blue&#39;:&#10;    printBlueBackground();&#10;    break;&#10;  case &#39;green&#39;:&#10;    printGreenBackground();&#10;    break;&#10;  default:&#10;    printYellowBackground();&#10;&#125;</span><br></pre></td></tr></table></figure>
<p>But what if we have a conditional with several checks in each statement? In this case, if we like to do less verbose and more ordered, we can use the conditional switch. If we pass true as parameter to the switch statement, It allows us to put a conditional in each case.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#10;switch(true) &#123;&#10;  case (typeof color === &#39;string&#39; &#38;&#38; color === &#39;black&#39;):&#10;    printBlackBackground();&#10;    break;&#10;  case (typeof color === &#39;string&#39; &#38;&#38; color === &#39;red&#39;):&#10;    printRedBackground();&#10;    break;&#10;  case (typeof color === &#39;string&#39; &#38;&#38; color === &#39;blue&#39;):&#10;    printBlueBackground();&#10;    break;&#10;  case (typeof color === &#39;string&#39; &#38;&#38; color === &#39;green&#39;):&#10;    printGreenBackground();&#10;    break;&#10;  case (typeof color === &#39;string&#39; &#38;&#38; color === &#39;yellow&#39;):&#10;    printYellowBackground();&#10;    break;&#10;&#125;</span><br></pre></td></tr></table></figure>
<p>But we must always avoid having several checks in every condition, avoiding use of switch as far as possible and take into account that the most efficient way to do this is through an object.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#10;var colorObj = &#123;&#10;  &#39;black&#39;: printBlackBackground,&#10;  &#39;red&#39;: printRedBackground,&#10;  &#39;blue&#39;: printBlueBackground,&#10;  &#39;green&#39;: printGreenBackground,&#10;  &#39;yellow&#39;: printYellowBackground&#10;&#125;;&#10;&#10;if (color &#38;&#38; colorObj.hasOwnProperty(color)) &#123;&#10;  colorObj[color]();&#10;&#125;</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/02/01/Check-if-a-property-is-in-a-Object/" itemprop="url">
                  Check if a property is in a Object
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-02-01T11:26:57+08:00" content="2016-02-01">
              2016-02-01
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/02/01/Check-if-a-property-is-in-a-Object/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/02/01/Check-if-a-property-is-in-a-Object/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#Check if a property is in a Object</p>
<h2 id="the_ambition_is_to_check_if_a_property_is_in_a_Object"><a href="#the_ambition_is_to_check_if_a_property_is_in_a_Object" class="headerlink" title="the ambition is to check if a property is in a Object"></a>the ambition is to check if a property is in a Object</h2><p>When you have to check if a property is present of an object, you probably are doing something like this:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#10;var myObject = &#123;&#10;  name: &#39;@tips_js&#39;&#10;&#125;;&#10;&#10;if (myObject.name) &#123; ... &#125;</span><br></pre></td></tr></table></figure>
<p>Thats ok, but you have to know that there are two native ways for this kind of thing, the in operator and Object.hasOwnProperty, every object descended from Object, has available both ways.<br>See the big Difference</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#10;var myObject = &#123;&#10;  name: &#39;@tips_js&#39;&#10;&#125;;&#10;&#10;myObject.hasOwnProperty(&#39;name&#39;); // true&#10;&#39;name&#39; in myObject; // true&#10;&#10;myObject.hasOwnProperty(&#39;valueOf&#39;); // false, valueOf is inherited from the prototype chain&#10;&#39;valueOf&#39; in myObject; // true</span><br></pre></td></tr></table></figure>
<p>Both differs in the depth how check the properties, in other words hasOwnProperty will only return true if key is available on that object directly, however in operator doesn’t discriminate between properties created on an object and properties inherited from the prototype chain.</p>
<p>Here another example</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#10;var myFunc = function() &#123;&#10;  this.name = &#39;@tips_js&#39;;&#10;&#125;;&#10;myFunc.prototype.age = &#39;10 days&#39;;&#10;&#10;var user = new myFunc();&#10;&#10;user.hasOwnProperty(&#39;name&#39;); // true&#10;user.hasOwnProperty(&#39;age&#39;); // false, because age is from the prototype chain</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/02/01/Hoisting/" itemprop="url">
                  Hoisting
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-02-01T11:25:22+08:00" content="2016-02-01">
              2016-02-01
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/02/01/Hoisting/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/02/01/Hoisting/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#Hoisting<br>Understanding hoisting will help you organize your function scope. Just remember, variable declaration and function definition are hoisted to the top. Variable definition is not, even if you declare and define a variable on the same line. Also, variable declaration is letting the system know that the variable exists while definition is assigning it a value.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">&#10;function doTheThing() &#123;&#10;  // ReferenceError: notDeclared is not defined&#10;  console.log(notDeclared);&#10;&#10;  // Outputs: undefined&#10;  console.log(definedLater);&#10;  var definedLater;&#10;&#10;  definedLater = &#39;I am defined!&#39;&#10;  // Outputs: &#39;I am defined!&#39;&#10;  console.log(definedLater)&#10;&#10;  // Outputs: undefined&#10;  console.log(definedSimulateneously);&#10;  var definedSimulateneously = &#39;I am defined!&#39;&#10;  // Outputs: &#39;I am defined!&#39;&#10;  console.log(definedSimulateneously)&#10;&#10;  // Outputs: &#39;I did it!&#39;&#10;  doSomethingElse();&#10;&#10;  function doSomethingElse()&#123;&#10;    console.log(&#39;I did it!&#39;);&#10;  &#125;&#10;&#10;  // TypeError: undefined is not a function&#10;  functionVar();&#10;&#10;  var functionVar = function()&#123;&#10;    console.log(&#39;I did it!&#39;);&#10;  &#125;&#10;&#125;</span><br></pre></td></tr></table></figure>
<p>To make things easier to read, declare all of your variables at the top of your function scope so it is clear which scope the variables are coming from. Define your variables before you need to use them. Define your functions at the bottom of your scope to keep them out of your way.</p>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/02/01/the-use-of-React-Mixin/" itemprop="url">
                  the use of React Mixin
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-02-01T11:14:57+08:00" content="2016-02-01">
              2016-02-01
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/02/01/the-use-of-React-Mixin/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/02/01/the-use-of-React-Mixin/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#the use of React Mixin</p>
<h2 id="the_function_of_React_Mixin_is_to_include_some_same_function"><a href="#the_function_of_React_Mixin_is_to_include_some_same_function" class="headerlink" title="the function of React Mixin is to include some same function"></a>the function of React Mixin is to include some same function</h2><h2 id="why_we_use_Minxin__3F"><a href="#why_we_use_Minxin__3F" class="headerlink" title="why we use Minxin ?"></a>why we use Minxin ?</h2><p>we know that it is too bad to use same code everywhere.<br>so if we want to add same code in different components,we need pack these codes with Mixin ,and import the place where you nedd.</p>
<h2 id="write_a_sample_of_Mixin"><a href="#write_a_sample_of_Mixin" class="headerlink" title="write a sample of Mixin"></a>write a sample of Mixin</h2><p>if we write an app, and in some cases , we need set attribute Name in different components.<br>Now,we dont need write many getDefaultProps .<br>We can define mixin.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var DefaultNameMixin = &#123;&#10;    getDefaultProps: function () &#123;&#10;        return &#123;name: &#34;Skippy&#34;&#125;;&#10;    &#125;&#10;&#125;;</span><br></pre></td></tr></table></figure>
<p>It is not so special , and it is just a simple object.<br>Include it into React Component.<br>To use mixin,we need add attr Minxins , then we wrap what we write ,and we treat it as a value of that attribute.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var ComponentOne = React.createClass(&#123;&#10;    mixins: [DefaultNameMixin],&#10;    render: function() &#123;&#10;    return &#60;h2&#62;Hello &#123;this.props.name&#125;&#60;/h2&#62;;&#10;    &#125;&#10;&#125;);&#10;&#10;React.renderComponent(&#60;ComponentOne /&#62;, document.body);</span><br></pre></td></tr></table></figure>
<p>##we can use it many times.<br>in other component:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var ComponentTwo = React.createClass(&#123;&#10;    mixins: [DefaultNameMixin],&#10;    render: function () &#123;&#10;        return (&#10;            &#60;div&#62;&#10;                &#60;h4&#62;&#123;this.props.name&#125;&#60;/h4&#62;&#10;                &#60;p&#62;Favorite food: &#123;this.props.food&#125;&#60;/p&#62;&#10;            &#60;/div&#62;&#10;        );&#10;    &#125;&#10;&#125;);</span><br></pre></td></tr></table></figure>
<p>#the life week will be called everytime.<br>if the minxin you write include life week ,dont be worried.<br>you still use them in life week and it will be called.<br>Except for these cases:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">render&#65306;&#21253;&#21547;&#22810;&#20010;render&#26041;&#27861;&#26159;&#19981;&#34892;&#30340;&#12290;React &#20250;&#36305;&#20986;&#24322;&#24120;&#65306;&#10;Uncaught Error: Invariant Violation: ReactCompositeComponentInterface:&#10;You are attempting to define `render` on your component more than once.&#10;This conflict may be due to a mixin.</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var UselessMixin = &#123;&#10;    componentDidMount: function () &#123;&#10;      console.log(&#34;asdas&#34;);&#10;    &#125;&#10;&#125;;&#10;&#10;var LolMixin = &#123;&#10;   mixins: [UselessMixin]&#10;&#125;;&#10;&#10;var PantsOpinion = React.createClass(&#123;&#10;   mixins: [LolMixin],&#10;   render: function () &#123;&#10;       return (&#60;p&#62;I dislike pants&#60;/p&#62;);&#10;   &#125;&#10;&#125;);&#10;&#10;React.renderComponent(&#60;PantsOpinion /&#62;, document.body);</span><br></pre></td></tr></table></figure>
<p>console.log shows asdas.</p>
<p>##array of Mixins.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var DefaultNameMixin = &#123;&#10;    getDefaultProps: function () &#123;&#10;        return &#123;name: &#34;Lizie&#34;&#125;;&#10;    &#125;&#10;&#125;;&#10;&#10;var DefaultFoodMixin = &#123;&#10;    getDefaultProps: function () &#123;&#10;        return &#123;food: &#34;Pancakes&#34;&#125;;&#10;    &#125;&#10;&#125;;&#10;&#10;var ComponentTwo = React.createClass(&#123;&#10;    mixins: [DefaultNameMixin, DefaultFoodMixin],&#10;    render: function () &#123;&#10;        return (&#60;div&#62;&#10;                &#60;h4&#62;&#123;this.props.name&#125;&#60;/h4&#62;&#10;                &#60;p&#62;Favorite food: &#123;this.props.food&#125;&#60;/p&#62;&#10;            &#60;/div&#62;);&#10;    &#125;&#10;&#125;);</span><br></pre></td></tr></table></figure>
<p>Note:<br>if we set Props == State ?<br>it will happen error.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Uncaught Error: Invariant Violation: mergeObjectsWithNoDuplicateKeys():&#10;Tried to merge two objects with the same key: name</span><br></pre></td></tr></table></figure>
<p>if we set same function ?<br>it will happen error.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var LogOnMountMixin = &#123;&#10;    componentDidMount: function () &#123;&#10;        console.log(&#34;mixin mount method&#34;);&#10;        this.logBlah()&#10;    &#125;,&#10;    // add a logBlah method here...&#10;    logBlah: function () &#123;&#10;        console.log(&#34;blah&#34;);&#10;    &#125;&#10;&#125;;&#10;&#10;var MoreLogOnMountMixin = &#123;&#10;    componentDidMount: function () &#123;&#10;        console.log(&#34;another mixin mount method&#34;);&#10;    &#125;,&#10;    // ... and again here.&#10;    logBlah: function () &#123;&#10;        console.log(&#34;something other than blah&#34;);&#10;    &#125;&#10;&#125;;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Uncaught Error: Invariant Violation: ReactCompositeComponentInterface:&#10;You are attempting to define `logBlah` on your component more than once.&#10;This conflict may be due to a mixin.</span><br></pre></td></tr></table></figure>
<h1 id="the_order_of_the_life_week"><a href="#the_order_of_the_life_week" class="headerlink" title="the order of the life week."></a>the order of the life week.</h1><p>1st we call is Minxin.<br>2nd we call some function in component.<br>and the order in minxin is from left to right.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var LogOnMountMixin = &#123;&#10;    componentDidMount: function () &#123;&#10;        console.log(&#34;mixin mount method&#34;);&#10;    &#125;&#10;&#125;;&#10;&#10;var MoreLogOnMountMixin = &#123;&#10;    componentDidMount: function () &#123;&#10;        console.log(&#34;another mixin mount method&#34;);&#10;    &#125;&#10;&#125;;&#10;var ComponentOne = React.createClass(&#123;&#10;    mixins: [MoreLogOnMountMixin, LogOnMountMixin],&#10;    componentDidMount: function () &#123;&#10;        console.log(&#34;component one mount method&#34;);&#10;    &#125;,&#10;    ...&#10;&#10;var ComponentTwo = React.createClass(&#123;&#10;    mixins: [LogOnMountMixin, MoreLogOnMountMixin],&#10;    componentDidMount: function () &#123;&#10;        console.log(&#34;component two mount method&#34;);&#10;    &#125;,&#10;    ...</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">another mixin mount method&#10;mixin mount method&#10;component one mount method&#10;&#10;mixin mount method&#10;another mixin mount method&#10;component two mount method</span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/02/01/Javascript-中的神器-Promise/" itemprop="url">
                  Javascript 中的神器-Promise
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-02-01T11:12:41+08:00" content="2016-02-01">
              2016-02-01
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/02/01/Javascript-中的神器-Promise/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/02/01/Javascript-中的神器-Promise/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>#Javascript 中的神器——Promise</p>
<p>##Promise in js<br><em>回调函数真正的问题在于他剥夺了我们使用 return 和 throw 这些关键字的能力。</em><br>而 Promise 很好地解决了这一切。</p>
<p>##概念<br>ES6 原生提供了 Promise 对象。</p>
<p><em>所谓 Promise，就是一个对象，用来传递异步操作的消息。</em><br>它代表了某个未来才会知道结果的事件（通常是一个异步操作），并且这个事件提供统一的 API，可供进一步处理。</p>
<blockquote>
<p>Promise 对象有以下两个特点。</p>
</blockquote>
<ul>
<li><p>（1）对象的状态不受外界影响。Promise 对象代表一个异步操作，有三种状态：Pending（进行中）、Resolved（已完成，又称 Fulfilled）和 Rejected（已失败）。只有异步操作的结果，可以决定当前是哪一种状态，任何其他操作都无法改变这个状态。这也是 Promise 这个名字的由来，它的英语意思就是「承诺」，表示其他手段无法改变。</p>
</li>
<li><p>（2）一旦状态改变，就不会再变，任何时候都可以得到这个结果。Promise 对象的状态改变，只有两种可能：从 Pending 变为 Resolved 和从 Pending 变为 Rejected。只要这两种情况发生，状态就凝固了，不会再变了，会一直保持这个结果。就算改变已经发生了，你再对 Promise 对象添加回调函数，也会立即得到这个结果。<br><em>这与事件（Event）完全不同，事件的特点是，如果你错过了它，再去监听，是得不到结果的。</em></p>
</li>
</ul>
<p><em>有了 Promise 对象，就可以将异步操作以同步操作的流程表达出来，避免了层层嵌套的回调函数。此外，Promise 对象提供统一的接口，使得控制异步操作更加容易。</em></p>
<p>##Promise 也有一些缺点。</p>
<ul>
<li>首先，无法取消 Promise，一旦新建它就会立即执行，无法中途取消。</li>
<li>其次，如果不设置回调函数，Promise 内部抛出的错误，不会反应到外部。</li>
<li>第三，当处于 Pending 状态时，无法得知目前进展到哪一个阶段（刚刚开始还是即将完成）。<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">var promise = new Promise(function(resolve, reject) &#123;</span><br><span class="line"><span class="keyword">if</span> (/* 异步操作成功 */)&#123;</span><br><span class="line">resolve(value);</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">reject(error);</span><br><span class="line">&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">promise.then(function(value) &#123;</span><br><span class="line">// success</span><br><span class="line">&#125;, function(value) &#123;</span><br><span class="line">// failure</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>Promise 构造函数接受一个函数作为参数，该函数的两个参数分别是 resolve 方法和 reject 方法。</p>
<blockquote>
<p>如果异步操作成功，则用 resolve 方法将 Promise 对象的状态，从「未完成」变为「成功」（即从 pending 变为 resolved）；</p>
<p>如果异步操作失败，则用 reject 方法将 Promise 对象的状态，从「未完成」变为「失败」（即从 pending 变为 rejected）。</p>
</blockquote>
<p>##基本的 api</p>
<blockquote>
<p>Promise.resolve()<br>Promise.reject()<br>Promise.prototype.then()<br>Promise.prototype.catch()<br>Promise.all() // 所有的完成<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">var p = Promise.all([p1,p2,p3]);</span><br><span class="line">Promise.race() // 竞速，完成一个即可</span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>##进阶<br>promises 的奇妙在于给予我们以前的 return 与 throw，每个 Promise 都会提供一个 then() 函数，和一个 catch()，实际上是 then(null, …) 函数，<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">somePromise().then(functoin()&#123;</span><br><span class="line">    // do something</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>我们可以做三件事，</p>
<ul>
<li><ol>
<li>return 另一个 promise</li>
</ol>
</li>
<li><ol>
<li>return 一个同步的值 (或者 undefined)</li>
</ol>
</li>
<li><ol>
<li>throw 一个同步异常 <code>throw new Eror(&#39;&#39;);</code><br>###1. 封装同步与异步代码<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">new Promise(function (resolve, reject) &#123;</span><br><span class="line">resolve(someValue);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ul>
<p>写成</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Promise.resolve(someValue);</span><br></pre></td></tr></table></figure>
<p>###2. 捕获同步异常<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">new Promise(function (resolve, reject) &#123;</span><br><span class="line">throw new Error(<span class="string">'悲剧了，又出 bug 了'</span>);</span><br><span class="line">&#125;).catch(function(err)&#123;</span><br><span class="line">console.log(err);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>如果是同步代码，可以写成<br><figure class="highlight python"><table><tr><td class="code"><pre><span class="line">Promise.reject(new Error(<span class="string">"什么鬼"</span>));</span><br></pre></td></tr></table></figure></p>
<p>###3. 多个异常捕获，更加精准的捕获<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">somePromise.then(function() &#123;&#10;return a.b.c.d();&#10;&#125;).catch(TypeError, function(e) &#123;&#10;//If a is defined, will end up here because&#10;//it is a type error to reference property of undefined&#10;&#125;).catch(ReferenceError, function(e) &#123;&#10;//Will end up here if a wasn&#39;t defined at all&#10;&#125;).catch(function(e) &#123;&#10;//Generic catch-the rest, error wasn&#39;t TypeError nor&#10;//ReferenceError&#10;&#125;);</span><br></pre></td></tr></table></figure></p>
<p>###4. 获取两个 Promise 的返回值</p>
<ul>
<li><ol>
<li>.then 方式顺序调用</li>
</ol>
</li>
<li><ol>
<li>设定更高层的作用域</li>
</ol>
</li>
<li><ol>
<li>spread<br>###5. finally<br>任何情况下都会执行的，一般写在 catch 之后<br>###6. bind<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">somethingAsync().bind(&#123;&#125;)&#10;.spread(function (aValue, bValue) &#123;&#10;this.aValue = aValue;&#10;this.bValue = bValue;&#10;return somethingElseAsync(aValue, bValue);&#10;&#125;)&#10;.then(function (cValue) &#123;&#10;     return this.aValue + this.bValue + cValue;&#10;&#125;);</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ul>
<p>或者 你也可以这样<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var scope = &#123;&#125;;&#10;somethingAsync()&#10;.spread(function (aValue, bValue) &#123;&#10;scope.aValue = aValue;&#10;scope.bValue = bValue;&#10;return somethingElseAsync(aValue, bValue);&#10;&#125;)&#10;.then(function (cValue) &#123;&#10;return scope.aValue + scope.bValue + cValue;&#10;&#125;);</span><br></pre></td></tr></table></figure></p>
<p>然而，这有非常多的区别，</p>
<p>你必须先声明，有<em>浪费资源</em>和<em>内存泄露的风险</em><br>不能用于放在一个表达式的上下文中<br>效率更低</p>
<p>###7. all。非常用于于处理一个动态大小均匀的 Promise 列表</p>
<p>###8. join。非常适用于处理多个分离的 Promise<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">var join = Promise.join;&#10;join(getPictures(), getComments(), getTweets(),&#10;function(pictures, comments, tweets) &#123;&#10;console.log(&#34;in total: &#34; + pictures.length + comments.length + tweets.length);&#10;&#125;);</span><br></pre></td></tr></table></figure></p>
<p>###9. props。处理一个 promise 的 map 集合。只有有一个失败，所有的执行都结束<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Promise.props(&#123;&#10;pictures: getPictures(),&#10;comments: getComments(),&#10;tweets: getTweets()&#10;&#125;).then(function(result) &#123;&#10;console.log(result.tweets, result.pictures, result.comments);&#10;&#125;);</span><br></pre></td></tr></table></figure></p>
<p>###10. any 、some、race<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Promise.some([&#10;ping(&#34;ns1.example.com&#34;),&#10;ping(&#34;ns2.example.com&#34;),&#10;ping(&#34;ns3.example.com&#34;),&#10;ping(&#34;ns4.example.com&#34;)&#10;], 2).spread(function(first, second) &#123;&#10;console.log(first, second);&#10;&#125;).catch(AggregateError, function(err) &#123;&#10;err.forEach(function(e) &#123;&#10;console.error(e.stack);&#10;&#125;);&#10;&#125;);;</span><br></pre></td></tr></table></figure></p>
<p>有可能，失败的 promise 比较多，导致，Promsie 永远不会 fulfilled</p>

          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/02/01/webpack学习resources-3/" itemprop="url">
                  webpack学习resources-3
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">发表于</span>
            <time itemprop="dateCreated" datetime="2016-02-01T11:08:34+08:00" content="2016-02-01">
              2016-02-01
            </time>
          </span>

          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2016/02/01/webpack学习resources-3/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/02/01/webpack学习resources-3/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

          
          
        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>webpack-howto</p>
<p>Goal of this guide</p>
<p>This is a cookbook of how to get things done with webpack. This includes most things we use at Instagram and nothing we don’t use.</p>
<p>My advice: start with this as your webpack docs, then look at the official docs for clarification.</p>
<p>Prerequisites</p>
<ul>
<li>You know browserify, RequireJS or something similar</li>
<li>You see the value in:<ul>
<li>Bundle splitting</li>
<li>Async loading</li>
<li>Packaging static assets like images and CSS</li>
</ul>
</li>
</ul>
<ol>
<li>Why webpack?</li>
</ol>
<ul>
<li><p>It’s like browserify but can split your app into multiple files. If you have multiple pages in a single-page app, the user only downloads code for just that page. If they go to another page, they don’t redownload common code.</p>
</li>
<li><p>It often replaces grunt or gulp because it can build and bundle CSS, preprocessed CSS, compile-to-JS languages and images, among other things.</p>
</li>
</ul>
<p>It supports AMD and CommonJS, among other module systems (Angular, ES6). If you don’t know what to use, use CommonJS.</p>
<ol>
<li>Webpack for Browserify people</li>
</ol>
<p>These are equivalent:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">browserify main.js &#62; bundle.js&#10;&#10;&#10;&#10;webpack main.js bundle.js</span><br></pre></td></tr></table></figure>
<p>However, webpack is more powerful than Browserify, so you generally want to make a webpack.config.js to keep things organized:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">// webpack.config.js&#10;module.exports = &#123;&#10;  entry: &#39;./main.js&#39;,&#10;  output: &#123;&#10;    filename: &#39;bundle.js&#39;&#10;  &#125;&#10;&#125;;</span><br></pre></td></tr></table></figure>
<p>This is just JS, so feel free to put Real Code in there.</p>
<ol>
<li>How to invoke webpack</li>
</ol>
<p>Switch to the directory containing webpack.config.js and run:</p>
<ul>
<li>webpack for building once for development</li>
<li>webpack -p for building once for production (minification)</li>
<li>webpack –watch for continuous incremental build in development (fast!)</li>
<li>webpack -d to include source maps</li>
</ul>
<ol>
<li>Compile-to-JS languages</li>
</ol>
<p>webpack’s equivalent of browserify transforms and RequireJS plugins is a loader. Here’s how you can teach webpack to load CoffeeScript and Facebook JSX+ES6 support (you must npm install babel-loader coffee-loader):</p>
<p>See also the babel-loader installation instructions for additional dependencies (tl;dr run npm install babel-core babel-preset-es2015 babel-preset-react).</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">// webpack.config.js&#10;module.exports = &#123;&#10;  entry: &#39;./main.js&#39;,&#10;  output: &#123;&#10;    filename: &#39;bundle.js&#39;&#10;  &#125;,&#10;  module: &#123;&#10;    loaders: [&#10;      &#123; test: /\.coffee$/, loader: &#39;coffee-loader&#39; &#125;,&#10;      &#123;&#10;        test: /\.js$/,&#10;        loader: &#39;babel-loader&#39;,&#10;        query: &#123;&#10;          presets: [&#39;es2015&#39;, &#39;react&#39;]&#10;        &#125;&#10;      &#125;&#10;    ]&#10;  &#125;&#10;&#125;;</span><br></pre></td></tr></table></figure>
<p>To enable requiring files without specifying the extension, you must add a resolve.extensions parameter specifying which files webpack searches for:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">// webpack.config.js&#10;module.exports = &#123;&#10;  entry: &#39;./main.js&#39;,&#10;  output: &#123;&#10;    filename: &#39;bundle.js&#39;&#10;  &#125;,&#10;  module: &#123;&#10;    loaders: [&#10;      &#123; test: /\.coffee$/, loader: &#39;coffee-loader&#39; &#125;,&#10;      &#123;&#10;        test: /\.js$/,&#10;        loader: &#39;babel-loader&#39;,&#10;        query: &#123;&#10;          presets: [&#39;es2015&#39;, &#39;react&#39;]&#10;        &#125;&#10;      &#125;&#10;    ]&#10;  &#125;,&#10;  resolve: &#123;&#10;    // you can now require(&#39;file&#39;) instead of require(&#39;file.coffee&#39;)&#10;    extensions: [&#39;&#39;, &#39;.js&#39;, &#39;.json&#39;, &#39;.coffee&#39;]&#10;  &#125;&#10;&#125;;</span><br></pre></td></tr></table></figure>
<ol>
<li>Stylesheets and images</li>
</ol>
<p>First update your code to require() your static assets (named as they would with node’s require()):</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">require(&#39;./bootstrap.css&#39;);&#10;require(&#39;./myapp.less&#39;);&#10;&#10;var img = document.createElement(&#39;img&#39;);&#10;img.src = require(&#39;./glyph.png&#39;);</span><br></pre></td></tr></table></figure>
<p>When you require CSS (or less, etc), webpack inlines the CSS as a string inside the JS bundle and require() will insert a<style> tag into the page. When you require images, webpack inlines a URL to the image into the bundle and returns it from require().</p>
<p>But you need to teach webpack to do this (again, with loaders):</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">// webpack.config.js&#10;module.exports = &#123;&#10;  entry: &#39;./main.js&#39;,&#10;  output: &#123;&#10;    path: &#39;./build&#39;, // This is where images AND js will go&#10;    publicPath: &#39;http://mycdn.com/&#39;, // This is used to generate URLs to e.g. images&#10;    filename: &#39;bundle.js&#39;&#10;  &#125;,&#10;  module: &#123;&#10;    loaders: [&#10;      &#123; test: /\.less$/, loader: &#39;style-loader!css-loader!less-loader&#39; &#125;, // use ! to chain loaders&#10;      &#123; test: /\.css$/, loader: &#39;style-loader!css-loader&#39; &#125;,&#10;      &#123;test: /\.(png|jpg)$/, loader: &#39;url-loader?limit=8192&#39;&#125; // inline base64 URLs for &#60;=8k images, direct URLs for the rest&#10;    ]&#10;  &#125;&#10;&#125;;</span><br></pre></td></tr></table></figure>
<ol>
<li>Feature flags</li>
</ol>
<p>We have code we want to gate only to our dev environments (like logging) and our internal dogfooding servers (like unreleased features we’re testing with employees). In your code, refer to magic globals:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">if (__DEV__) &#123;&#10;  console.warn(&#39;Extra logging&#39;);&#10;&#125;&#10;// ...&#10;if (__PRERELEASE__) &#123;&#10;  showSecretFeature();&#10;&#125;</span><br></pre></td></tr></table></figure>
<p>Then teach webpack those magic globals:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">// webpack.config.js&#10;&#10;// definePlugin takes raw strings and inserts them, so you can put strings of JS if you want.&#10;var definePlugin = new webpack.DefinePlugin(&#123;&#10;  __DEV__: JSON.stringify(JSON.parse(process.env.BUILD_DEV || &#39;true&#39;)),&#10;  __PRERELEASE__: JSON.stringify(JSON.parse(process.env.BUILD_PRERELEASE || &#39;false&#39;))&#10;&#125;);&#10;&#10;module.exports = &#123;&#10;  entry: &#39;./main.js&#39;,&#10;  output: &#123;&#10;    filename: &#39;bundle.js&#39;&#10;  &#125;,&#10;  plugins: [definePlugin]&#10;&#125;;</span><br></pre></td></tr></table></figure>
<p>Then you can build with BUILD_DEV=1 BUILD_PRERELEASE=1 webpack from the console. Note that since webpack -p runs uglify dead-code elimination, anything wrapped in one of these blocks will be stripped out, so you won’t leak secret features or strings.</p>
<ol>
<li>Multiple entrypoints</li>
</ol>
<p>Let’s say you have a profile page and a feed page. You don’t want to make the user download the code for the feed if they just want the profile. So make multiple bundles: create one “main module” (called an entrypoint) per page:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">// webpack.config.js&#10;module.exports = &#123;&#10;  entry: &#123;&#10;    Profile: &#39;./profile.js&#39;,&#10;    Feed: &#39;./feed.js&#39;&#10;  &#125;,&#10;  output: &#123;&#10;    path: &#39;build&#39;,&#10;    filename: &#39;[name].js&#39; // Template based on keys in entry above&#10;  &#125;&#10;&#125;;</span><br></pre></td></tr></table></figure>
<p>For profile, insert <script src="build/Profile.js"></script> into your page. Do a similar thing for feed.</p>
<ol>
<li>Optimizing common code</li>
</ol>
<p>Feed and Profile share a lot in common (like React and the common stylesheets and components). webpack can figure out what they have in common and make a shared bundle that can be cached between pages:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">// webpack.config.js&#10;&#10;var webpack = require(&#39;webpack&#39;);&#10;&#10;var commonsPlugin =&#10;  new webpack.optimize.CommonsChunkPlugin(&#39;common.js&#39;);&#10;&#10;module.exports = &#123;&#10;  entry: &#123;&#10;    Profile: &#39;./profile.js&#39;,&#10;    Feed: &#39;./feed.js&#39;&#10;  &#125;,&#10;  output: &#123;&#10;    path: &#39;build&#39;,&#10;    filename: &#39;[name].js&#39; // Template based on keys in entry above&#10;  &#125;,&#10;  plugins: [commonsPlugin]&#10;&#125;;</span><br></pre></td></tr></table></figure>
<p>Add <script src="build/common.js"></script> before the script tag you added in the previous step and enjoy the free caching.</p>
<ol>
<li>Async loading</li>
</ol>
<p>CommonJS is synchronous but webpack provides a way to asynchronously specify dependencies. This is useful for client-side routers, where you want the router on every page, but you don’t want to have to download features until you actually need them.</p>
<p>Specify the split point where you want to load asynchronously. For example:</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">if (window.location.pathname === &#39;/feed&#39;) &#123;&#10;  showLoadingState();&#10;  require.ensure([], function() &#123; // this syntax is weird but it works&#10;    hideLoadingState();&#10;    require(&#39;./feed&#39;).show(); // when this function is called, the module is guaranteed to be synchronously available.&#10;  &#125;);&#10;&#125; else if (window.location.pathname === &#39;/profile&#39;) &#123;&#10;  showLoadingState();&#10;  require.ensure([], function() &#123;&#10;    hideLoadingState();&#10;    require(&#39;./profile&#39;).show();&#10;  &#125;);&#10;&#125;</span><br></pre></td></tr></table></figure>
<p>webpack will do the rest and generate extra chunk files and load them for you.</p>
<p>webpack will assume that those files are in your root directory when you load then into a html script tag for example. You can use output.publicPath to configure that.</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">// webpack.config.js&#10;output: &#123;&#10;    path: &#34;/home/proj/public/assets&#34;, //path to where webpack will build your stuff&#10;    publicPath: &#34;/assets/&#34; //path that will be considered when requiring your files&#10;&#125;</span><br></pre></td></tr></table></figure>
<p>Additional resources</p>
<p>Take a look at a real world example on how a successful team is leveraging webpack: <a href="http://youtu.be/VkTCL6Nqm6Y">http://youtu.be/VkTCL6Nqm6Y</a> This is Pete Hunt at OSCon talking about webpack at Instagram.com</p>
<p>FAQ</p>
<p>webpack doesn’t seem modular</p>
<p>webpack is extremely modular. What makes webpack great is that it lets plugins inject themselves into more places in the build process when compared to alternatives like browserify and requirejs. Many things that may seem built into the core are just plugins that are loaded by default and can be overridden (i.e. the CommonJS require() parser).</p>
</style></p>
          
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    

  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/default_avatar.jpg"
               alt="tuluxmu" />
          <p class="site-author-name" itemprop="name">tuluxmu</p>
          <p class="site-description motion-element" itemprop="description">Front-end engineer。</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">20</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            
              <span class="site-state-item-count">0</span>
              <span class="site-state-item-name">分类</span>
              
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">0</span>
              <span class="site-state-item-name">标签</span>
              </a>
          </div>

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/tuluxmu" target="_blank">
                  
                    <i class="fa fa-globe"></i> github
                  
                </a>
              </span>
            
          
        </div>

        
        
          <div class="cc-license motion-element" itemprop="license">
            <a href="http://creativecommons.org/licenses/by-nc-sa/4.0" class="cc-opacity" target="_blank">
              <img src="/images/cc-by-nc-sa.svg" alt="Creative Commons" />
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="icon-next-heart fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">tuluxmu</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>



      </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  


  



  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=0.5.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=0.5.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=0.5.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"your-duoshuo-shortname"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
  





  
  

  
  


</body>
</html>
